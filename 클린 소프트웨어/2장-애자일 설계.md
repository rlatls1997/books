# 2. 애자일 설계

애자일(agile) - 기민함, 날렵함

애자일하게 소프트웨어를 만들어나가면 설계는 언제하나? 좋은 설계가 필요하지 않은가? 란 의문이 들 수 있음.

애자일은 미래의 구현과 구조보단 현재의 시스템에 초좀을 맞춘다.

#### 잘못된 설계의 증상

설계가 잘못되었을때 나타나는 증상

- 경직성 : 설계를 변경하기 어려움
- 취약성 : 설계가 망가지기 쉬움
- 부동성 : 설계를 재사용하기 어려움
- 점착성 : 제대로 동작하기 어려움
- 불필요한 복잡성 : 과도한 설계
- 불필요한 반복 : 마우스 남용
- 불투명성 : 혼란스러운 표현

이런 '코드의 악취'같은 문제를 피하기 위한 방법을 알아본다

#### 원칙
'코드의 악취'를 제거하고 현재 기능 집합에 대해 최적의 설계를 구성할 수 있도록 돕는 원칙도 알아본다

1. SRP : 단일 책임 원칙
2. OCP : 개방 폐쇄 원칙
3. LSP : 리스코프 치환 원칙
4. DIP : 의존 관계 역전 원칙
5. ISP : 인터페이스 분리 원칙

#### 악취와 원칙
보통 코드악취는 위와 같은 원칙을 위반했을때 발생한다.

하지만 원칙을 항상 따르는 것은 불필요한 복잡성을 높일 수 있다.

(꼭 필요할때만 적용하는 것이 베스트)


## Chapter 7. 애자일 설계란 무엇인가?
소프트웨어 설계에 대한 내용

### 소프트웨어에서 어떤 것이 잘못되는가?
소프트웨어는 시간이 지날수록 점점 망가지고 유지보수가 어려워진다.

이는 재설계의 필요로 이어지는데, 재설계는 성공하기 어렵다.(재설계를 하는 와중에도 시스템은 계속 발전하고 변경되기 때문에)

새로운 설계는 발전되고 변경될 도착점을 쫓아가야한다. 그래서 어렵다.

### 설계의 악취 : 부패하고있는 소프트웨어의 냄새
다음과 같은 냄새가 소프트웨어는 망가지고 있다는 지표이다.

1. 경직성 : 설계를 변경하기 어려움. 변경하려면 시스템의 다른 부분들까지 많이 변경해야함
2. 취약성 : 설계가 망가지기 쉬움. 변경하면 관련없는 부분이 망가짐
3. 부동성 : 설계를 재사용하기 어려움. 
4. 점착성 : 제대로 동작하기 어려움. 옳은 동작을 하는 것이 어려움 
5. 불필요한 복잡성 : 과도한 설계. 직접적인 효용이 전혀 없는 설계로 인한.. 
6. 불필요한 반복 : 마우스 남용. 단일 추상개념으로 통합할 수 있는 반복적인 구조가 설계에 포함됨. 
7. 불투명성 : 혼란스러운 표현. 잃고 이해하기 어려움

#### 1. 경직성
단순한 방법으로도 소프트웨어를 변경하기 어려운 경향. (한 군데를 수정하면 의존적인 모듈에서 단계적으로 수정이 발생하는..)

간단한 수정처럼 보여도 예상하지 못한 간접적인 영향때문에 작업시간 추정이 어렵다.

#### 2. 취약성
한 군데를 변경했을때 프로그램의 많은 부분이 잘못되는 경향.

#### 3. 부동성
다른 시스템에서 유용하게 쓸 수 있는 부분을 포함하고 있으나 그런 부분을 원래 시스템에서 분리하는 수고와 위험성이 큰 케이스.

#### 4. 점착성
`소프트웨어의 점착성`과 `환경의 점착성` 두 형태로 나눌 수 있다.

- 소프트웨어의 점착성

변경사항을 마주했을때 설계를 유지하며 변경하는 케이스가 있고, 설계를 수정하여 변경하는 케이스가 있다.

만약, 변경할 때 설계를 유지하는 방법이 더 어렵다면 설계의 점착성은 높아진다.

설계를 수정하여 변경하는 케이스는 잘못된 동작을 하게될 가능성이 높고, 올은 동작을 하기 힘들어진다.

이 때문에 프로그래머는 설계를 유지할 수 있는, 변경이 쉬운 설계가 필요한데 그렇지 않다면 점착성이 높은 것이다.

- 환경의 점착성

개발환경이 느리고 비효율적일때 발생한다.

컴파일 시간이 길거나, git에서 pull 받고 checkout하는 등의 동작이 느리거나..


점착성을 최소화하기 위해 설계를 유지하기 쉬운 시스템과 효율적인 프로젝트 환경이 필요하다.

#### 5. 불필요한 복잡성
현 시점에서 유용하지 않은 요소가 설계에 포함되어 있는 경우를 말한다.

개발자가 필요할 것으로 예상되는 기능이나 설계를 집어넣을때 발생하는데,

이게 미래의 변경에 대해 유연해질 것처럼 보여서 괜찮아보이지만 그렇지 않다.
 
사용되지 않는 구성요소들이 늘어나서 소프트웨어가 복잡하고 이해하기 어려워질 뿐이다.

#### 6. 불필요한 반복
시스템에서 반복되는 부분은 흔하게 발생한다.

어떤 작업자가 작성한 코드에서 필요한 부분을 추가해 다른 코드에 붙이는.. 등의 작업이 반복되면 조금씩 다른 형태로 반복되어 나타나게 되는데

이로인해 추상화된 개념을 잃게된다.

반복되는 부분을 찾아 적절한 추상화를 통해 이를 얿ㅅ애는 일은 시스템을 이해하고 유지보수하기 쉽게 만든다.

하지만 반복되는 부분을 찾아서 시스템을 변경하는 것은 모든 반복되는 부분에서 조금씩 다른 부분이 있기 때문에 되다.

#### 7. 불투명성
모듈을 이해하기 어려운 경향을 말한다.

발전하는 코드에 따라 시간이 지날수록 코드가 불명료해지는 경향이 있는데, 불투명성을 최소로 유지하기 위해 지속적인 노력이 필요하다.

불투명성의 최소화를 위해 읽는 사람의 입장에서 생각하고, 코드를 리팩토링하는데에 노력을 기울여야한다.

그리고 타인이 자신의 코드를 검토하도록 할 필요학 있다.

### 무엇이 소프트웨어의 부패를 촉진하는가?
애자일이 아닌 환경에선, 초기 설계에 없었던 요구사항 변경때문에 설계가 퇴화하게 된다.

요구사항의 변경은 보통 빠르게 이루어져야 해서 기존 설계에 익숙하지 않은 개발자가 작업을 맡게되는 까닭에,

기존 설계를 위반하는 변경이 축적되어 코드악취를 풍기게 된다.

하지만, 요구사항은 변경되는게 일반적이고 계속되는 요구사항 변경때문에 설계가 실패한다면 설계와 방식에 문제가 있는 것이다.

### 애자일 팀은 소프트웨어가 부패하도록 내버려두지 않는다.
애자일팀은 시스템의 설계를 가능한 단순하게 유지한다.

그리고 이를 단위테스트와 인수테스트로 뒷받침한다.

이런 작업을 통해 설계를 유연하고 변경하기 쉽게 유지하여 변경되는 요규사항에 맞춰 그 시점에 가장 적합한 설계를 가진 시스템을 만들어낸다.

### 'Copy'프로그램
프로그램을 작성하면서 요구사항이 변경되고, 추가됨에 따라 코드냄새가 발생. 이에 따라 설계를 개선하는.. 예시. 패스

p.115~

### 가능한 한 좋은 상태로 설계 유지하기
애자일에서 개발가는 설계를 가능한 적절하고 명료한 상태로 유지하기 위해 애쓴다.

코드에 부패가 발생하도록 놔두지 않는다.

어느 한 군데에서 발생하는 코드 냄새를 방치하면 나중엔 걷잡을 수 없이 퍼져나간다.

### 결론
애자일 설계는 과정이다.

원칙, 패턴, 소프트웨어의 구조, 가독성을 향상하기 위한 방식의 연속적인 적용이며,

설계를 간단하고 명료하고 표현적으로 유지하려는 노력이다.

