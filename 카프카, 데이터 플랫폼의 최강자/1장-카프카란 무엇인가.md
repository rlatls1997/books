# 1. 카프카란 무엇인가
## 1.1 카프카의 탄생배경
### 엔드투엔드 연결방식을 가진 아키텍쳐의 문제점
- 실시간 트랜잭션(OLTP)처리와 비동기 처리가 동시에 이뤄지지만 통합된 전송 영역이 없어 복잡도가 높다
- 데이터 파이프라인의 관리가 어렵다.

이에따라 모든 시스템으로 데이터를 전송할 수 있고, 실시간 처리가 가능하며, 확장이 용이한 시스템이 필요해졌다.
목표는,
- 프로듀서와 컨슈머의 분리
- 메시징 시스템과 같이 영구 메시지 데이터를 여러 컨슈머에게 허용
- 높은 처리량을 위한 메시지 최적화
- 데이터가 증가함에 따라 스케일아웃이 가능한 시스템


## 1.2 카프카의 동작 방식과 원리
### 메시징시스템이란?
메시지라고 불리는 데이터 단위를 보내는 측(프로듀서)에서 카프카에 토픽이라는 각각의 메시지 저장소에 데이터를 저장하면,
가져가는 측(컨슈머)이 원하는 토픽에서 데이터를 가져가게 되는 형태의 시스템.(펍/섭 모델)

### 메시징시스템의 장점과 단점
일반적형태의 통신은 통신에 참여하는 개체를 일일이 연결해야하지만 중앙의 메시징 시스템을 이용하면 각 개체가 메시징 시스템과만 연결되어 확장이 용이하다.
또한 메세지 데이터 유실의 염려가 없다.

단점은 개체끼리 직접 통신하지 않기 때문에 전달속도가 빠르지 않다.

### 기존의 메시징 시스템과 카프카
기존의 메시징 시스템은 간단한 수 KB정도의 데이터를 전송하는데에 사용되었다. 속도와 용량보단 메시지의 보관, 교환, 전달과정의 신뢰성이 중요했기 때문에.
성능상 대량의 데이터를 다루기도 어려웠다.

카프카는 이런 메시징시스템의 단점을 극복하기 위해 신뢰성 관리를 프로듀서, 컨슈머쪽으로 넘기고 메시징시스템 내의 작업량을 줄여서 고성능 메시징 시스템으로 만들어졌다.


## 1.3 카프카의 특징
### 프로듀서와 컨슈머의 분리
카프카 메시징 시스템을 사용한 펍/섭 구조로 시스템 복잡도를 낮출 수 있다.
또한 서버추가에 대한 부담도 줄일 수 있다.(필요할 경우 카프카와만 통신을 추가하면 되므로)

### 멀티 프로듀서, 멀티 컨슈머
- 하나의 프로듀서는 하나 이상의 토픽으로 메시지를 보낼 수 있다.
- 하나의 컨슈머는 하나 이상의 토픽으로부터 메시지를 가져올 수 있다.

### 디스크에 메시지 저장
- 일반적인 메시징시스템과 달리 카프카는 정해진 보관 주기동안 디스크에 메시지를 저장한다.
- 컨슈머는 메시지 손실없이 메시지를 가져올 수 있다.

### 확장성
- 하나의 카프카 클러스터는 3대의 브로커로 시작해 수십대의 브로커로 확장 가능하다.
- 확장 작업은 카프카 서비스의 중단 없이 온라인 상태에서 작업이 가능하다.

### 높은 성능

**카프카 용어정리**
- 카프카 : 메시징 시스템. 
- 브로커 : 카프카 애플리케이션이 설치되어 있는 서버를 말함
- 토픽 : 프로듀서가 카프카로 보낸 메시지를 구분하기 위한 네임. 
- 파티션 : 병렬처리가 가능하도록 토픽을 나눌 수 있음.
- 프로듀서 : 메시지 생산자
- 컨슈머 : 메시지 소비자

## 1.4 카프카의 확장과 발전
## 1.5 정리



