# 7. 카프카를 활용한 데이터 파이프라인 구축
데이터 파이프라인을 직접 구성하는 예
- 아파치 나이파이
- 엘라스틱 파일비트
- 엘라스틱 엘라스틱 서치
- 엘라스틱 키바나
- 
## 7.1 카프카를 활용한 데이터 흐름도
프로듀서는 메시지를 생산하여 메시지를 카프카로 전송하는 역할
카프카는 프로듀서가 생산한 메시지를 저장하는 중간 큐 역할
컨슈머는 카프카에 저장된 메시지를 가져오는 역할

기업내 요구사항이 많아지며 데이터의 수집, 저장, 분석에 이르는 일련의 과정을 관리하는 솔루션들이 많아짐

나이파이 : 데이터 흐름을 정의하고 정의된 흐름대로 자동으로 실행해주는 애플리케이션

## 7.2 파일비트를 이용한 메시지 전송
파일비트는 엘라스틱에서 제공하고 있는 경량 데이터 수집기.
파일비트를 사용하여 카프카 토픽에 메시즈를 프로듀싱할 수 있다

p.267 ~ 참고

## 7.3 나이파이를 이용해 메시지 가져오기
나이파이 애플리케이션은 카프카와 동일하게 클러스터 구성이 가능한 분산 애플리케이션.

설정을 변경하여 클러스터 모드로 실행할 수 있다.
주키퍼를 활용하여 클러스터 구성 가능

나이파이 프로세서 : 나이파이에서 데이터 처리를 위한 각각의 컴포넌트. 파일로 저장, 데이터 전송 등 여러가지 작업을 할 수 있다.
카프카 컨슈머 및 프로듀서의 역할도 할 수 있다.

p.272 ~ 참고

## 7.4 실시간 분석을 위해 엘라스틱서치에 메시지 저장
엘라스틱서치는 엘라스틱사의 분산형 RESTful 검색 및 분석 엔진으로서 전문 검색 질의를 이용하여 원하는 데이터 분석을 빠르게 할 수 있는 애플리케이션이다.

## 7.5 키바나를 이용해 엘라스틱서치에 조저장된 데이터 확인
엘라스틱서치에 저장된 데이터를 키바나를 이용하여 직관적으로 확인할 수 있다.
키바나는 엘라스틱서치에 저장된 데이터 확인과 분석을 쉽게 할 수 있는 애플리케이션이다.

## 7.6 현재의 토픽을 이용해 새로운 토픽으로 메시지 재생산
나이파이 하나만으로 현재 존재하는 토픽을 컨슈밍하여 메시지를 가공하고 원하는 토픽으로 메시지를 프로듀싱할 수 있다.

## 7.7 정리
- 웹 인터페이스 형태로 데이터 처리를 할 수 있는 아파치 나이파이
- 엘라스틱의 분산형 RESTful 검색 및 분석 엔진인 엘라스틱서치
- 엘라스틱서치에 저장된 데이터 확인과 분석을 도와주는 키바나
- 경량 데이터 수집기인 파일비트

이런 다양한 애플리케이션을 활용하여 실시간 로드 데이터 처리 및 분석 작업을 효율적으로 할 수 있다.





