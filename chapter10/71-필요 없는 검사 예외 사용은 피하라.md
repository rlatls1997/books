## 71. 필요 없는 검사 예외 사용은 피하라

검사예외는 잘 활용하면 API와 프로그램의 질을 높일 수 있다.

검사예외는 발생한 문제를 프로그래머가 처리하게 하여 안전성을 높이게 해준다.

반면 검사예외를 과하게 쓰면 호출하는 코드에선 catch블록으로 예외를 처리하거나 더 바깥으로 던져 문제를 전파해야한다. 이는 API사용자에게 부담을 준다.

API를 제대로 사용해도 발생할 수 있는 예외이거나,
프로그래머가 의미있는 조치를 취할 수 있는 경우라면 검사예외는 받아들일 수있다.

하지만 어디에도 속하지 않는다면 비검사 예외를 사용하는게 좋다

검사예외를 회피하는 가장 쉬운 방법은 적절한 결과 타입을 담은 옵셔널을 반환하는 것이다.

검사 예외를 던지는 대신 빈 옵셔널을 반환하면 된다.

이 방식은 예외가 발생한 이유를 알려주는 부가 정보를 담을 수 없다.

다른 방법으로는, 검사 예외를 던지는 메서드를 2개로 쪼개 비검사 예외로 바꿀 수 있다.

이 방식에서 첫 번째 메서드는 예외가 던져질지 여부를 boolean으로 반환한다.

ex) 검사 예외를 던지는 메서드(리팩터링 전)

```java
try{
	obj.action(args);
}catch(TheCheckedException e){
	...//예외 상황에 대처한다.
}
```

상태 검사 메서드와 비검사 예외를 던지는 메서드(리팩터링 후)

```java
if(obj.actionPermitted(args)){
	obj.action(args);
}else{
	...//예외 상황에 대처한다
}
```

위 방법은 모든 상황에 적용할 수는 없지만 적용할 수 있다면 편한 API를 제공할 수 있다.

실패시 스레드를 중단하길 원한다면 다음처럼 케이스를 나누지 않아도 된다.

```java
obj.action(args);
```

위와 같이 한 줄로 주로 쓰일 것 같다고 판단될 때 사용하면 좋다.

**결론**

검사 예외를 적절히 사용하면 프로그램의 안정성을 높여주는 반면, 남용하면 사용하기 어려운 API를 만든다.

API사용자가 예외상황을 복구할 방법이 없다면 비검사 예외를 던지자.

옵셔널을 반환하는 방법을 고려해보자.