## 75. 예외의 상세 메시지에 실패 관련 정보를 담으라

예외를 잡지 못해 프로그램이 실패하면 자바시스템은 그 예외의 스택 트레이스 정보를 자동으로 출력한다.

스택트레이스는 예외 객체의 toString메서드를 호출해 얻는 문자열이다.

따라서 예외의 toString메서드에 실패 원인에 대한 정보를 가능한 한 많이 담아 반환하는 것이 중요하다.

**실패 순간을 포착하려면 발생한 예외에 관여된 모든 매개변수와 필드의 값을 실패 메시지에 담아야 한다**. IndexOutOfBOundsException을 예로 들면 상세ㅔ시지에 범위의 최솟값과 최댓값, 범위를 벗어났을때의 인덱스값을 담아야 한다.

이런 값들로 현상을 보면서 무엇을 고쳐야 할지 분석할 수 있다.

관련데이터는 모두 담아야하지만 장황할 필요는 없다.스택트레이스에는 예외가 발생한 메서드, 파일이름, 줄번호까지 얻을 수 있어서 문서와 소스코드에서 얻을 수 있는 정보는 늘어놔봤자 군더더기이다.

예외의 상세메시지는 사용자에게 보여줄 오류메시지와 다르다.

예외메시지는 가독성보다는 담긴 내용이 더 중요하다.

어차피 예외메시지의 주 소비층은 프래그래머나 사이트 신뢰성 엔지니어(site reliablility enginner,SRE) 이기 때문이다.

실패를 적절히 포착하기 위해 필요한 정보를 예외 생성자에서 모두 받아서 상세메시지까지 생성해놓는 방법도 좋다