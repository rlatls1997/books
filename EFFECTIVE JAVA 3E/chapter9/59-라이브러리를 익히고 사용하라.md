## 59. 라이브러리를 익히고 사용하라

n까지의 랜덤값을 반환하는 random 메서드를 예시로 보자

ex) 문제가 심각한 코드

```java
static Random rnd = new Random();

static int random(int n){
	return Math.abs(rnd.nextInt()) % n;
}
```

문제 1. n이 크지 않은 2의 제곱수라면 얼마 지나지 않아서 같은 수열이 반복된다.

문제 2. n이 2의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반환된다. n이 크면 이 현상은 더 두드러진다.

문제 3. 지정한 범위 바깥의 수가 튀어나올 수 있따. nextInt()가 Integer.MIN_VALUE를 반환하면 Math.abs도 Integer.MIN_VALUE를 반환하고 나머지연산자 % 는 음수를 반환해버린다.

이런 프로그램은 실패할뿐더러 문제해결을 위한 현상 재현도 쉽지 않다.

이런 문제를 해결하기 위해 Random.nextInt(int)를 사용하면 된다.

### 표준라이브러라 사용의 이점

- **표준 라이브러리르 사용하면 그 코드를 작성한 전문가의 지식과 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.**

(자바 7부터는 고품질 + 빠른 ThreadLocalRandom을 사용하는 것이 좋다, 병렬처리에선 SplittableRandom)

- **비즈니스 로직에 더 집중할 수 있다**

비즈니스 로직과 크게 관련없는 문제를 해결하는데에 시간을 허비하지 않아도 된다. 따라서 기능개발에 더 집중할 수 있다.

- **성능이 지속해서 개선된다**

표준 라이브러리는 수 년에 걸쳐 다시 작성되며 성능이 극적으로 개선되기도 한다.

- **기능이 많아진다**

라이브러리에 부족한 부분이 있다면 다음 릴리스에 해당 기능이 추가되기도 한다.

- **많은 사람들에게 익숙한 코드를 작성할 수 있따**

많은 사람들이 사용하는 코드이므로 다른 개발자들이 더 읽기 좋고 유지보수하기 좋고 재활용하기 쉬워진다.

실상은 라이브러리의 기능이 존재하는지 모르기때문에 직접 구현해서 사용하는 경우가 많다.

라이브러리가 방대하여 모든 것을 기억하기는 벅차지만 다음의 패키지에는 익숙해질 필요가 있다

- java.lang
- java.util
- java.io

특히 java.util.concurrent 패키지는 멀티스레드 프로그래밍 작업을 단순화해주는 고수준의 기능과 직접 원하는 부분을 커스터마이징할 수 있는 저수준 요소들을 제공하여 동시성 처리에 도움을 준다.

표준 라이브러리에서 원하는 기능을 찾지 못했다면 guava같은 서드파티 라이브러리를 사용해보자.